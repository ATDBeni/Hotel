<?php
session_start();
?>
<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Finder 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom, #f9fafb, #e5e7eb);
        }

        /* Animatie pentru card */
        .hotel-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .hotel-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        /* Toast animatie */
        .toast {
            transform: translateY(120%);
            transition: transform 0.4s ease;
        }

        .toast.show {
            transform: translateY(0);
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">

    <!-- Header sticky cu glassmorphism -->
    <header class="fixed top-0 left-0 right-0 z-50 backdrop-blur-md bg-white/70 shadow-md">
        <div class="container mx-auto flex justify-between items-center px-6 py-4">
            <a href="index.html"
                class="text-3xl font-bold bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent">Hotel
                Finder</a>
            <nav>
                <a href="login.html"
                    class="px-4 py-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-semibold transition">
                    Login Admin
                </a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto flex-grow px-6 mt-28">
        <h1 class="text-5xl font-extrabold text-center text-gray-800 mb-4 tracking-tight">
            GƒÉse»ôte <span class="text-indigo-600">Hotelul Perfect</span>
        </h1>
        <p class="text-center text-gray-600 mb-12 text-lg">
            Alege din cele mai bune hoteluri, cu un singur click.
        </p>

        <!-- Loader -->
        <div id="loader" class="flex justify-center items-center py-20">
            <div class="w-12 h-12 border-4 border-indigo-400 border-t-transparent rounded-full animate-spin"></div>
        </div>

        <!-- Lista Hoteluri -->
        <div id="hotels-container" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>

        <!-- Toast message
        <div id="message-box"
            class="toast fixed bottom-6 left-1/2 -translate-x-1/2 bg-white shadow-xl rounded-xl px-6 py-3 text-gray-800 font-medium">
            <span id="message-text"></span>
        </div> -->
    </main>

    <footer class="bg-white mt-10 py-4 shadow-md">
        <div class="container mx-auto text-center text-gray-500">
            &copy; 2026 Hotel Finder. All rights reserved.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', fetchHotels);

        async function fetchHotels() {
            try {
                const response = await fetch('api/get_hotels.php');
                const data = await response.json();

                const loader = document.getElementById('loader');
                const container = document.getElementById('hotels-container');
                loader.style.display = "none";
                container.classList.remove('hidden');

                if (data.error) throw new Error(data.error);
                if (data.length === 0) {
                    container.innerHTML = `<p class="col-span-full text-center text-gray-500 text-lg">Nu existƒÉ hoteluri disponibile.</p>`;
                    return;
                }

                data.forEach(hotel => {
                    const card = document.createElement('div');
                    card.className = "hotel-card bg-white rounded-2xl shadow-lg overflow-hidden";

                    card.innerHTML = `
    <img src="${hotel.image_url}" alt="${hotel.name}" class="w-full h-56 object-cover">
    <div class="p-6">
        <div class="flex justify-between items-center mb-2">
            <h3 class="text-xl font-bold text-gray-900">${hotel.name}</h3>
            <span class="text-indigo-600 font-semibold">${hotel.price} RON / noapte</span>
        </div>
        <p class="text-gray-500 text-sm mb-3">${hotel.location}</p>
        <p class="text-gray-700 mb-4">${hotel.description.length > 150 ? hotel.description.substring(0, 150) + '...' : hotel.description}</p>
        <div class="flex justify-between items-center">
            <a href="rezervare.html?hotel_id=${hotel.id}"
               class="flex-1 text-center bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-2 rounded-lg font-semibold shadow-md hover:shadow-lg transition">
               RezervƒÉ acum
            </a>
            <a href="detalii_hotel.html?id=${hotel.id}" 
               class="ml-3 bg-gray-100 hover:bg-gray-200 text-gray-700 p-3 rounded-full shadow-md transition">
               üëÅ
            </a>
        </div>
    </div>
`;

                    container.appendChild(card);
                });

            } catch (error) {
                showMessage("Eroare: " + error.message, true);
            }
        }

        function showMessage(message, isError = false) {
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            messageText.textContent = message;
            messageBox.classList.add('show');
            messageBox.style.backgroundColor = isError ? '#fee2e2' : '#dcfce7';
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }
    </script>

</body>

</html>