<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablou de Bord Administrator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }

        .table-header th {
            @apply px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider;
        }

        .table-row td {
            @apply px-4 py-4 whitespace-nowrap text-sm text-gray-900;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">
    <nav class="bg-white shadow-lg w-full">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-gray-800">Hotel Finder Admin</a>
            <div class="flex items-center space-x-4">
                <a href="#" class="px-3 py-2 text-gray-700 hover:text-blue-500 rounded-md text-sm font-medium">Tablou de
                    Bord</a>
                <a href="login.html"
                    class="px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-md text-sm font-medium"
                    onclick="logout()">Deconectare</a>
            </div>
        </div>
    </nav>
    <main class="container mx-auto mt-8 flex-grow p-4">
        <h1 class="text-4xl font-bold text-center text-gray-800 mb-8">Rezervări Active</h1>
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50 table-header">
                        <tr>
                            <th>Nume Client</th>
                            <th>Email</th>
                            <th>Telefon</th>
                            <th>Hotel</th>
                            <th>Check-in</th>
                            <th>Check-out</th>
                            <th>Acțiuni</th>
                        </tr>
                    </thead>
                    <tbody id="reservations-table-body" class="bg-white divide-y divide-gray-200">
                        <!-- Rezervările vor fi inserate aici de JavaScript -->
                    </tbody>
                </table>
                <div id="no-reservations-message" class="text-center p-4 text-gray-500 hidden">
                    Nu există rezervări active.
                </div>
            </div>
        </div>
    </main>
    <script type="module">
        // Funcția de deconectare
        function logout() {
            // Aici ar trebui implementată logica de deconectare
            window.location.href = 'login.html';
        }

        // Simulare de date de la baza de date
        const reservations = [
            {
                id: 1,
                name: "Maria Popescu",
                email: "maria.p@email.com",
                phone: "0722123456",
                hotel: "Grand Palace",
                checkIn: "2024-11-15",
                checkOut: "2024-11-20"
            },
            {
                id: 2,
                name: "Ion Vasile",
                email: "ion.v@email.com",
                phone: "0745678901",
                hotel: "Seaview Resort",
                checkIn: "2024-12-01",
                checkOut: "2024-12-05"
            }
        ];

        const tableBody = document.getElementById('reservations-table-body');
        const noReservationsMessage = document.getElementById('no-reservations-message');

        function renderReservations() {
            tableBody.innerHTML = '';
            if (reservations.length === 0) {
                noReservationsMessage.classList.remove('hidden');
            } else {
                noReservationsMessage.classList.add('hidden');
                reservations.forEach(res => {
                    const row = document.createElement('tr');
                    row.className = 'table-row';
                    row.innerHTML = `
                        <td>${res.name}</td>
                        <td>${res.email}</td>
                        <td>${res.phone}</td>
                        <td>${res.hotel}</td>
                        <td>${res.checkIn}</td>
                        <td>${res.checkOut}</td>
                        <td>
                            <button onclick="cancelReservation(${res.id})" class="text-sm text-red-600 hover:text-red-900 font-medium transition-colors">Anulează</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }

        // Funcție pentru anularea rezervării
        function cancelReservation(id) {
            // Aici ar trebui să facem o cerere către un script PHP pentru a anula rezervarea în baza de date
            // const response = await fetch('api/cancel_reservation.php', { method: 'POST', body: JSON.stringify({ id }) });
            // console.log("Anularea rezervării cu ID-ul:", id);

            // Simulare de anulare
            const index = reservations.findIndex(res => res.id === id);
            if (index > -1) {
                reservations.splice(index, 1);
                renderReservations();
                alert(`Rezervarea cu ID-ul ${id} a fost anulată.`);
            }
        }

        // Asigurăm că funcția este disponibilă global
        window.cancelReservation = cancelReservation;

        // Renderizam rezervările la încărcarea paginii
        renderReservations();

        // Placeholder pentru logica de a prelua datele de la server
        async function fetchReservations() {
            // Aici vom face o cerere către un script PHP pentru a prelua datele din baza de date
            // const response = await fetch('api/get_reservations.php');
            // const data = await response.json();
            // reservations = data; // Actualizam lista
            // renderReservations();
        }
    </script>
</body>

</html>