<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezervă un Hotel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0ea5e9, #3b82f6, #6366f1);
            background-size: 400% 400%;
            animation: gradientShift 12s ease infinite;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .glass-card {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .neon-input {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white;
            font-weight: 500;
        }

        .neon-input:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 10px #38bdf8;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-6">
    <nav class="glass-card w-full py-4 px-6 flex justify-between items-center rounded-xl mb-6">
        <a href="index.html" class="text-3xl font-extrabold text-white drop-shadow-lg">🏨 Hotel Finder</a>
        <div class="space-x-4">
            <a href="index.html" class="text-white hover:text-blue-200 transition font-medium">Hoteluri</a>
            <a href="login.html" class="text-white hover:text-blue-200 transition font-medium">Administrator</a>
        </div>
    </nav>

    <main class="glass-card max-w-2xl w-full rounded-2xl p-10 text-white">
        <h1 class="text-4xl font-extrabold text-center mb-6 drop-shadow-lg">🛎 Rezervă-ți Hotelul</h1>
        <form id="reservationForm" class="space-y-6">
            <input type="hidden" id="hotel_id" name="hotel_id">

            <div>
                <label for="nume_client" class="block text-lg font-medium mb-2">👤 Nume complet</label>
                <input type="text" id="nume_client" name="nume_client" required
                    class="neon-input w-full p-3 rounded-xl">
            </div>

            <div>
                <label for="email_client" class="block text-lg font-medium mb-2">📧 Adresă email</label>
                <input type="email" id="email_client" name="email_client" required
                    class="neon-input w-full p-3 rounded-xl">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="data_cazare" class="block text-lg font-medium mb-2">📅 Data cazare</label>
                    <input type="text" id="data_cazare" name="data_cazare" required
                        class="neon-input w-full p-3 rounded-xl">
                </div>
                <div>
                    <label for="data_plecare" class="block text-lg font-medium mb-2">🏁 Data plecare</label>
                    <input type="text" id="data_plecare" name="data_plecare" required
                        class="neon-input w-full p-3 rounded-xl">
                </div>
            </div>

            <button type="submit"
                class="w-full py-3 px-4 mt-4 rounded-xl bg-gradient-to-r from-blue-400 to-indigo-500 text-lg font-bold shadow-lg hover:scale-105 hover:shadow-2xl transition transform">
                🚀 Trimite Rezervarea
            </button>
        </form>

        <button onclick="window.location.href='index.html'"
            class="w-full mt-4 py-3 px-4 rounded-xl bg-white text-blue-600 font-bold hover:bg-blue-100 transition">
            ⬅️ Înapoi Acasă
        </button>

        <div id="statusMessage" class="mt-4 text-center"></div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const hotelId = params.get('hotel_id');
            const hotelIdInput = document.getElementById('hotel_id');
            if (hotelId) hotelIdInput.value = hotelId;

            flatpickr("#data_cazare", {
                dateFormat: "Y-m-d",
                minDate: "today",
                theme: "material_blue",
                altInput: true,
                altFormat: "F j, Y",
            });

            flatpickr("#data_plecare", {
                dateFormat: "Y-m-d",
                minDate: "today",
                theme: "material_blue",
                altInput: true,
                altFormat: "F j, Y",
            });

            const form = document.getElementById('reservationForm');
            const statusMessage = document.getElementById('statusMessage');

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                statusMessage.textContent = 'Se trimite rezervarea...';
                statusMessage.className = 'mt-4 text-center text-gray-200';

                try {
                    const response = await fetch('api/save_reservation.php', { method: 'POST', body: formData });
                    const result = await response.json();

                    if (result.status === 'success') {
                        statusMessage.textContent = result.message;
                        statusMessage.className = 'mt-4 text-center text-green-300 font-bold';
                        form.reset();
                    } else {
                        statusMessage.textContent = result.message;
                        statusMessage.className = 'mt-4 text-center text-red-300 font-bold';
                    }
                } catch (error) {
                    console.error('Eroare:', error);
                    statusMessage.textContent = 'A apărut o eroare la trimiterea rezervării. Încearcă din nou.';
                    statusMessage.className = 'mt-4 text-center text-red-300 font-bold';
                }
            });
        });
    </script>
</body>

</html>